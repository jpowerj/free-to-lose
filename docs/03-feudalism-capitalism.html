<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Free to Lose: An Introduction to Marxist Economic Philosophy - 3&nbsp; Feudalism and Capitalism</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04-exploitation-profits.html" rel="next">
<link href="./02-origin-exploitation.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./03-feudalism-capitalism.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Feudalism and Capitalism</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Free to Lose: An Introduction to Marxist Economic Philosophy</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-origin-exploitation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The Origin of Exploitation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-feudalism-capitalism.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Feudalism and Capitalism</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-exploitation-profits.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Exploitation and Profits</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-morality-of-exploitation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">05-morality-of-exploitation.html</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-emergence-of-class.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">The Emergence of Class</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Feudalism and Capitalism</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Adam Smith and David Ricardo were, with others, champions of and intellectual impresarios for capitalism. They constructed economic interpretations of capitalism emphasizing the aspects of capitalism that made it appear to be more progressive than feudalism, or any aristocratic system in which the form of income of the propertied class was rent from land. Capitalists were pictured as progressive because they created industry and physical capital in the process of competition with each other, whereas landed rentiers were parasites who did nothing of social value. These distinctions between capital and land are not present in the models of Chapter 2, although one can construct other models to emphasize that difference. The purpose of the models of Chapter 2 is to focus on the emergence of classes, accumulation, and the highly unequal distribution of income that emerges as the consequence of private and unequal ownership of the means of production (whether these means are capital stock, like seed corn, or land). 3.1 A Brief Account of Feudalism I will characterize feudalism in a fairly simple way, omitting many nuances for the sake of simplicity. A lord owned a large amount of land and had the rights to certain amounts of labor provided by serfs or peasants who lived on the estate. Each serf family had its family plot of land, on which it produced its subsistence needs. In addition to working on the family plot, the serf was required to provide labor to the lord: corvee and demesne labor-working a certain number of Feudalism and Capitalism 29 days a year on the lord’s land, building roads to keep up the manor, participating in the activities of the armed forces of the lord. The quid pro quo between serfs and lords was complicated, in the sense that the property rights of the peasant plot were not well-defined from the modern point of view. (For a study of the incredible intricacy of feudal property rights, see Milsom, 1981.) As a rule, the lord could not expel the peasant family from its plot of land. (Sometimes this could happen at the time of death of the head of the peasant household.) Nor, on the other hand, could the serf decide to leave, to go to a town, for example, to work as an artisan or laborer. If he did, he would be hunted down by the lord, returned to the manor, and punished. Thus, the serf and his family had certain rights to the family plot and to the grain he could produce there, and the lord had certain rights to the serf’s labor. Feudalism was a coercive system; force against the peasantry was needed to extract the corvee and demesne labor that, under feudal rights, were owed to the lord. Such coercion was necessary, because the peasant family had access to its own means of reproduction, by virtue of its tenure on the family plot. Furthermore, the peasant could not, according to the above description, be removed from the plot if he failed to perform his duties to the lord. Hence, it was necessary for the lord to use extraeconomic coercion to extract serf labor for the manor. The coercion is called extraeconomic because it dispenses with the institution of the market. Serfs were forced to work not for a wage, but because their access to the family plot meant they did not need a wage. From the economic viewpoint, there were two classes under feudalism: lords, who had property rights in land and in the labor of serfs who lived on their manors; and serfs, who had certain property rights in family plots (of a muddy sort) and some property in their own labor. The surplus above subsistence consumption was produced by serfs, and almost entirely during the time when they worked for the lord, doing corvee and demesne labor. The huge castles in which the lords lived and the extravagant consumption they enjoyed were the product of serf labor, and it is difficult to view those things as not being part of the economic surplus, that part of the product above subsistence needs. Indeed, the Marxist characterization of feudalism incorporates this idea: a large class of serfs produced the feudal surplus product, which was the property of a small class of lords. The initial property rights that gave rise to this transfer of the 30 Feudalism and Capitalism surplus from those who produced it to those who owned it were property rights over a certain fraction of resident serf labor and were established by feudal law . The labor expended in the production of the surplus I will call surplus labor. Under feudalism, the performance of surplus labor was transparent to the serf: his week (or year) was divided into two parts, one in which he worked to reproduce himself on the family plot, and another in which he performed corvee and demesne labor for the lord. It would have been difficult to obscure these class relations and to claim that the serf was working for himself the whole time. Justifying feudalism required justifying feudal property rights and teaching the serf that his duty lay in providing surplus labor for the lord, because the lord was a vassal to another lord, who was in turn vassal to the king, who was the representative of God. Feudal property rights thus descended in a tree originating with the king; and if the king represented God, then to challenge these property rights involved taking on a much bigger challenge. So, ultimately, religious ideology was used to justify feudal property rights, to the extent that such a justification was attempted. There were hundreds of peasant rebellions against feudalism, and these rebellions, in conjunction with a vital capitalism that was associated with an emerging merchant class in towns, eventually contributed to the demise of the feudal system. As the rebellions demonstrated, feudal ideology was not entirely successful in convincing serfs of the righteousness of feudalism. In England in 1381, for example, there was a peasant uprising in which 100,000 peasants formed an army, slaughtered lords, and marched on London. Their goal was to see the king, whom they believed to represent God, and who would therefore right the wrongs perpetrated upon them by the lords. The king agreed to meet with their leaders, whom he promptly executed, displaying the head of one Wat Tyler on a lance. Although this ended the rebellion, the incident sounded the death knell of English feudalism. The class consciousness of some of the participants in this rebellion is indicated in a sermon delivered by one of its leaders, the priest John Ball (Dobson, 1983, p.&nbsp;374). The sermon began: When Adam delved and Eve span Who was then a gentleman? The Marxist interpretation of feudalism mentioned earlier has been challenged by some contemporary neoclassical economists (North Feudalism and Capitalism 31 and Thomas), who maintain that it is incorrect to view the feudal surplus as an unearned return accruing to feudal lords by virtue of their property rights in serf labor. Their argument is that lords performed certain socially necessary functions in organizing life on the manor; their income, in compensation for these functions, was what I have called the feudal surplus product. Chief among these functions was the provision of defense of the serfs and the manor against invasion by bandits and, perhaps (in some countries where feudal law was not well established), by other lords. The provision of defense is a public good, and there is a free-rider problem in the provision of public goods. In other words, no serf would voluntarily join the manor’s army, for the costs to him of so doing were greater than the marginal benefits that he derived, and whether or not an effective army existed would be unaffected by whether or not he joined. So coercion was necessary to create this public good, and the lord was the agent whose role it was to provide such coercion. The same could be said for the building of roads and the provision of an infrastructure on the manor. Feudalism, according to this account, is a system of exchange in which each factor or agent receives a return that is necessary for that factor or agent to supply its services. Were lords not to receive lordly income, they would not take on the onerous entrepreneurial, and coercive, task of manor organization, which was socially necessary. Even the amount of the lord’s income could be viewed as emerging from an implicit contract between the serfs and the lord. And even the coercion of the serfs could be viewed as the outcome of a prior implicit contract between serfs and lords in which the serfs agreed to be ::oerced by the lord, knowing that in their myopic selfinterest they would otherwise act as free riders, and ultimately deprive themselves of the public goods they needed. Serfs, like Ulysses in his attp.mpt to avoid the sirens, agreed to have themselves chained to the mast for fear of otherwise acting in self-destructive ways. This account does not explain why the particular men who were lords occupied that role. One might speculate that the lords were those who possessed the entrepreneurial talent to take on these organizational tasks. They were the risk lovers and the adventurers who were capable of doirlg grand things. Or, more realistically, one could maintain that to a large extent lordliness was inherited. It was not so crucial who the lord was, it was only necessary that someone take on the responsibility of being the lord. According to this second proposal, the feudal class system was socially necessary, although it would be inappropriate to view any particular lord as deserving his 32 Feudalism and Capitalism income, in the sense of his having exceptional capacities for the provision of lordly services. According to the first proposal (lords as adventurers), there is an even stronger argument for lordly income being a “return to scarce talents,” in line with the general neoclassical explanation of income distribution. Deciding whether the Marxist or the neoclassical account of feudal class relations and power and income distribution is more accurate is largely a historical matter. Both views are probably internally consistent accounts, although I believe historical evidence makes it clear that the neoclassical implicit-contract account of feudalism is a fairy tale. One of the authors of the neoclassical account I have summarized appears to have retracted his belief in it (see North, 1982)which does not, of course, establish that it is wrong. For some rebuttal of the neoclassical account by a Marxist historian, see the article by Brenner (1977). 3.2 A Difference between Capitalism and Feudalism In a capitalist system no one is coerced (in any normal sense of the word) to sell his labor power. If coercion was the driving force behind the production of the feudal surplus, then what is the driving force behind the production of the capitalist surplus? How does it come about that, in a system with no cheating and no coercion, a surplus materializes in the hands of a small class of capitalists and a large class of workers remains at a level of relative subsistence? This question was, for Marx, essentially economic. The problem was exacerbated by the apparent lack of surplus labor performed by the workers. Although it was clear under feudalism when the surplus labor was performed, such is not the case under capitalism. A particular worker does not divide his week up between production of his subsistence needs and production of a surplus that is appropriated by capitalists. Instead, he might stamp out auto fenders all day, every day. Furthermore, he is not coerced to do so; he bargains with the capitalist for his wage and is free to take his labor elsewhere if he chooses. Some, although not all, of the explanation for the emergence of a surplus appropriated by capitalists can be seen in the model of Section 2.3. Because workers are deprived of the ownership of the capital stock (the seed corn), they are willing to sell their labor power to capitalists who own capital and can put them to work on it. In both Feudalism and Capitalism 33 models of Chapter 2, workers still have the equivalent of a subsistence plot to return to, although that is not an essential part of the story. One can substitute for the Farm technology in those models the statement that workers simply cannot live if they receive a wage lower than V3 units of com per day. In the models in Chapter 2 a worker did not work more than 3 days per week, and he needed 1 unit of com per week to survive. To be more consistent with my statement above, let me stipulate that a worker must consume 2 units of com per week to survive; production of this consumption bundle requires 6 days of work per week on the Farm. This stipulation changes the equilibrium in the models of Chapter 2, because people must work longer. Then a wage of 1/3 unit of com per day would be a subsistence wage and must be paid by the capitalist, even in the absence of a Farm technology, if he is to have a steady pool of workers (I should say, a pool of steady workers). Any lower wage would not allow workers to meet their own consumption requirements while working for the capitalist, assuming 6 days is the maximum work week. The only productive asset the workers own is labor power, the capacity to work, and this they agree to sell to those who own the means of production, as the only way to gain an income with which to live. The wage workers receive is bid down to the subsistence wage, or to their next best alternative wage (which they earn on the Farm), because of the abundance of labor relative to capital. The Marxist expression is that workers are “free in a double sense”: free to sell their labor power and move around (unlike serfs) and freed from access to the means of their economic reproduction (also unlike serfs). Because workers are separated from the means of reproduction, capitalism can operate without extraeconomic coercion; workers will willingly offer their labor power for sale, because capitalists have something they need. Despite the lack of extraeconomic coercion, a surplus does emerge, because the wage rate that equilibrates the labor market is sufficiently low to produce a profit. This outcome was demonstrated in Chapter 2-and profits emerged even without postulating that capitalists had a strong desire to accumulate. Of course, real capitalists do not have the subsistence preferences assumed in the models of Chapter 2, so it becomes even easier to see how profits emerge in a real economy. From the viewpoint of the worker, capitalist property relations obscure the nature of surplus appropriation. Whereas the serf could see that he was expending surplus labor for the lord, because of the physical division of his time between work for his own economic 34 Feudalism and Capitalism reproduction and work for the lord, the proletarian has no such vision. (In some cases, feudal dues were a portion of the product from the serf’s plot, a kind of extraction by the lord also highly visible to the serf.) The proletarian, in contrast, stamps out auto fenders all week long and uses his wage to buy other goods that he does not make. The social division of labor under capitalism makes it impossible for any worker to see clearly that the amount of labor he expends during the week is greater than the amount of labor that is socially necessary to produce the wage goods that he consumes. The model in Section 2.3 was a bit too simple to make this point well, because only com was produced there. A demonstration of how capitalist property relations obscure, from the worker’s viewpoint, the expenditure of surplus labor, requires a model with at least two goods (besides leisure), a model in which a worker might work in one industry yet consume goods from several. (This model will be presented in the next chapter.) Nevertheless, even in the model in Section 2.3 the worker can be mystified by capitalist property relations with respect to the expenditure of surplus labor. If I were to ask either a worker or a peasant in that model, “How long must you work to earn enough com to live?” he would reply, “Three days.” But if I were to ask a serf the same question, he would reply, “I only have to work two days on my family plot, but then the lord forces me to provide an extra day of labor for him.” (If he is a class-conscious serf, he will not mince his words this way.) For the proletarian, there is no clear separation between surplus labor and labor necessarily expended for his own economic reproduction. It might be more clear to the proletarian that he is providing surplus labor if he were to see the capitalists lazily collecting profits without working. In fact, the real world is more complicated: first of all, real entrepreneurs do work hard; and, second, capitalist firms are owned, not by their managers, but by stockholders who are quite invisible to the worker. Third, although many people own some stock, they are not capitalists. The big stockholders are often financial institutions, and therefore the identity of capitalists is difficult to trace. (It is perhaps more accurate to say that, because of the role of financial institutions in the stock market and on the boards of corporations, it is the agents of capital owners who become important.) The essential point, however, is that a surplus far above the present consumption needs of a capitalist society emerges, and in the Marxist analysis, this is due to the abundance of labor relative to capital, which serves to bid down the wage to a level permitting profits. Feudalism and Capitalism 35 These are appropriated by the owners of capital, the relatively scarce factor of production. The purpose of the Marxist economic analysis of a capitalist economy, or at least that dimension of the analysis discussed here, is to point out that the class of agents who are separated from the means of production produce not only their own subsistence needs but also the entire surplus that becomes the property of capital owners as a consequence of competition. Competition under capitalism replaces coercion under feudalism, but beneath the surface the story is the same in this regard: a small, propertied class appropriates the surplus produced by a large, unpropertied one. So long as capitalist property relations obscure this appropriation, religious ideology and direct coercion are not so important as they were under feudalism. It is much easier to maintain the belief that each person is receiving his just deserts under capitalism, for there is no extraeconomic coercion and workers are free to leave or to start businesses and become capitalists themselves. Some even succeed in doing so. There are various ways in which these claims are simplifications of reality, or are false. First of all, there is extraeconomic coercion under capitalism, chiefly in two places: on the job, and in the protection of property rights. The police and judicial power of the state protect capitalist property rights, and capitalists exert coercion on the job in the form of authority that is not mediated through markets. When workers go on strike, state power is often used to help the capitalists in a one-sided way. Nevertheless, the extraeconomic coercion under capitalism is less proximate than it is under feudalism. Second, I have not yet argued that the distribution of incomeprofits and wages-under capitalism is unjust, as Marxism claims it is under feudalism. I have established that workers produce the surplus product as the consequence of a series of market bargains emanating from an initial unequal ownership of the means of production. But is there anything wrong with that income distribution? To establish that would seem to require an argument for the injustice of the initial distribution of the means of production. And although the argument that feudal lords earned the property rights that gave rise to their wealth is incredible, an analogous argument with regard to capitalism is not. If capitalists came to own their capital by virtue of working harder or more skillfully in the past than those who are now proletarians, is it wrong to deprive them of the profits that emerge from voluntary trades with proletarians on the labor market? I will pursue this question in later chapters.</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02-origin-exploitation.html" class="pagination-link  aria-label=" &lt;span="" origin="" of="" exploitation&lt;="" span&gt;"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The Origin of Exploitation</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04-exploitation-profits.html" class="pagination-link" aria-label="<span class='chapter-number'>4</span>&nbsp; <span class='chapter-title'>Exploitation and Profits</span>">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Exploitation and Profits</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>